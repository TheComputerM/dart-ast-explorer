import{a as Ct,s as _t,m as wt,c as Rt,b as Nt,g as It,d as ft,r as Z,e as B,f as pt,h as q,i as Q,j as Et,u as gt,k as $,l as mt,n as Ft,o as Vt,q as Dt,p as zt,t as Lt,v as Bt,w as Qt,x as Ut,y as O,z as Wt,A as Mt,B as $t,C as jt,D as T,E as X,F as Y,G as P,H as m,S as qt,I as _,J as Gt,K as Ht,L as Zt,P as Xt,N as Yt,M as Jt,O as Kt,Q as G,T as F,R as te,U as ee,V as y,W as se,X as ie,Y as ne,Z as J,_ as re,$ as oe,a0 as w,a1 as ae,a2 as le,a3 as he,a4 as K,a5 as ce,a6 as ue,a7 as de,a8 as tt,a9 as fe}from"./index-BkO0fcPK.js";const pe=5,R=6,N=10;let ge=(s,t,e,i)=>(s.events=s.events||{},s.events[e+N]||(s.events[e+N]=i(r=>{s.events[e].reduceRight((a,o)=>(o(a),a),{shared:{},...r})})),s.events[e]=s.events[e]||[],s.events[e].push(t),()=>{let r=s.events[e],a=r.indexOf(t);r.splice(a,1),r.length||(delete s.events[e],s.events[e+N](),delete s.events[e+N])}),me=1e3,be=(s,t)=>ge(s,i=>{let r=t(i);r&&s.events[R].push(r)},pe,i=>{let r=s.listen;s.listen=(...o)=>(!s.lc&&!s.active&&(s.active=!0,i()),r(...o));let a=s.off;return s.events[R]=[],s.off=()=>{a(),setTimeout(()=>{if(s.active&&!s.lc){s.active=!1;for(let o of s.events[R])o();s.events[R]=[]}},me)},()=>{s.listen=r,s.off=a}}),ke=(s,t,e)=>{Array.isArray(s)||(s=[s]);let i,r=0,a=()=>{let c=s.map(n=>n.get());if(i===void 0||c.some((n,h)=>n!==i[h])){let n=++r;i=c;let h=t(...c);h&&h.then&&h.t?h.then(u=>{n===r&&o.set(u)}):o.set(h)}},o=Ct(void 0,Math.max(...s.map(c=>c.l))+1),l=a;return be(o,()=>{let c=s.map(n=>n.listen(l,-1/o.l));return a(),()=>{for(let n of c)n()}}),o},xe=(s,t)=>ke(s,t);const bt={size:"md",variant:"line"},ye=[{size:"sm",variant:"enclosed",css:{list:{height:"10"},trigger:{h:"8",minW:"8",textStyle:"sm",px:"3"},content:{p:"3.5"}}},{size:"md",variant:"enclosed",css:{list:{height:"11"},trigger:{h:"9",minW:"9",textStyle:"sm",px:"3.5"},content:{p:"4"}}},{size:"lg",variant:"enclosed",css:{list:{height:"12"},trigger:{h:"10",minW:"10",textStyle:"sm",px:"4"},content:{p:"4.5"}}},{size:"sm",variant:"outline",css:{trigger:{h:"9",minW:"9",textStyle:"sm",px:"3.5"},content:{p:"3.5"}}},{size:"md",variant:"outline",css:{trigger:{h:"10",minW:"10",textStyle:"sm",px:"4"},content:{p:"4"}}},{size:"lg",variant:"outline",css:{trigger:{h:"11",minW:"11",textStyle:"md",px:"4.5"},content:{p:"4.5"}}},{size:"sm",variant:"line",css:{trigger:{fontSize:"sm",h:"9",minW:"9",px:"2.5"},content:{pt:"3"}}},{size:"md",variant:"line",css:{trigger:{fontSize:"md",h:"10",minW:"10",px:"3"},content:{pt:"4"}}},{size:"lg",variant:"line",css:{trigger:{px:"3.5",h:"11",minW:"11",fontSize:"md"},content:{pt:"5"}}}],ve=[["root","tabs__root"],["list","tabs__list"],["trigger","tabs__trigger"],["content","tabs__content"],["indicator","tabs__indicator"]],Pe=ve.map(([s,t])=>[s,Nt(t,bt,It(ye,s))]),Oe=wt((s={})=>Object.fromEntries(Pe.map(([t,e])=>[t,e.recipeFn(s)]))),et=["variant","size"],Ae=s=>({...bt,...Rt(s)}),Te=Object.assign(Oe,{__recipe__:!1,__name__:"tabs",raw:s=>s,variantKeys:et,variantMap:{variant:["enclosed","line","outline"],size:["sm","md","lg"]},splitVariantProps(s){return _t(s,et)},getVariantProps:Ae});function Se(s,t,e){return{isPresent:s.matches("mounted","unmountSuspended"),setNode(i){i&&t({type:"NODE.SET",node:i})}}}var{and:Ce,or:_e}=pt;function S(s){return s?.animationName||"none"}function we(s){const t=s.present?"mounted":"unmounted";return ft({initial:t,watch:{present:["raisePresenceChange","setPrevPresent"]},context:{node:null,styles:null,prevAnimationName:"",present:!1,...s},on:{"NODE.SET":{actions:["setNode","setStyles"]},"PRESENCE.CHANGED":[{guard:"isPresent",target:"mounted",actions:["setPrevAnimationName"]},{guard:_e("isAnimationNone","isDisplayNone"),target:"unmounted",actions:["invokeOnExitComplete"]},{guard:Ce("wasPresent","isAnimating"),target:"unmountSuspended"},{target:"unmounted",actions:["invokeOnExitComplete"]}]},states:{mounted:{on:{UNMOUNT:"unmounted"}},unmountSuspended:{activities:["trackAnimationEvents"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},"ANIMATION.END":{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:"mounted"}}}},{guards:{isPresent:e=>!!e.present,isAnimationNone:e=>S(e.styles)==="none",isDisplayNone:e=>e.styles?.display==="none",wasPresent:e=>!!e.prevPresent,isAnimating:e=>e.prevAnimationName!==S(e.styles)},actions:{invokeOnExitComplete(e){e.onExitComplete?.()},setNode(e,i){e.node=Z(i.node)},setStyles(e,i){const r=i.node.ownerDocument.defaultView||window;e.styles=Z(r.getComputedStyle(i.node))},raisePresenceChange(e,i,{send:r}){r("PRESENCE.CHANGED")},setPrevPresent(e){e.prevPresent=e.present},setPrevAnimationName(e){requestAnimationFrame(()=>{e.prevAnimationName=S(e.styles)})},clearPrevAnimationName(e){e.prevAnimationName=""}},activities:{trackAnimationEvents(e,i,{send:r}){const a=e.node;if(!a)return;const o=c=>{c.target===a&&(e.prevAnimationName=S(e.styles))},l=c=>{const h=S(e.styles).includes(c.animationName);c.target===a&&h&&r("ANIMATION.END")};return a.addEventListener("animationstart",o),a.addEventListener("animationcancel",l),a.addEventListener("animationend",l),()=>{a.removeEventListener("animationstart",o),a.removeEventListener("animationcancel",l),a.removeEventListener("animationend",l)}}}})}B()(["onExitComplete","present"]);const[Re,Ne]=q({hookName:"useRenderStrategyContext",providerName:"<RenderStrategyProvider />"}),kt=s=>Q()(s,["lazyMount","unmountOnExit"]),Ie=s=>{const[t,e]=kt(s),[i,r]=Et(!1),[a,o]=gt(we(e),{context:e}),l=$(()=>Se(a,o));return mt(()=>{l().isPresent&&r(!0)}),$(()=>({isUnmounted:!l().isPresent&&!i()&&t.lazyMount||t.unmountOnExit&&!l().isPresent&&i(),isPresent:l().isPresent,presenceProps:{ref:l().setNode,hidden:!l().isPresent,"data-state":e.present?"open":"closed"}}))},[Ee,Os]=q({hookName:"usePresenceContext",providerName:"<PresenceProvider />"});var H=s=>typeof s=="object"&&s!==null&&s.nodeType===1,Fe=s=>H(s)&&s.tagName==="IFRAME";function Ve(s){return H(s)?s.offsetWidth>0||s.offsetHeight>0||s.getClientRects().length>0:!1}var xt="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",yt=(s,t=!1)=>{if(!s)return[];const e=Array.from(s.querySelectorAll(xt));(t==!0||t=="if-empty"&&e.length===0)&&H(s)&&st(s)&&e.unshift(s);const r=e.filter(st);return r.forEach((a,o)=>{if(Fe(a)&&a.contentDocument){const l=a.contentDocument.body;r.splice(o,1,...yt(l))}}),r};function st(s){return!s||s.closest("[inert]")?!1:s.matches(xt)&&Ve(s)}var j,v=new Map,De=s=>s.getBoundingClientRect();function ze(s,t){const{scope:e="rect",getRect:i=De,onChange:r}=t,a=Le({scope:e,getRect:i}),o=v.get(s);return o?(o.callbacks.push(r),r(i(s))):(v.set(s,{rect:{},callbacks:[r]}),v.size===1&&(j=requestAnimationFrame(a))),function(){const c=v.get(s);if(!c)return;const n=c.callbacks.indexOf(r);n>-1&&c.callbacks.splice(n,1),c.callbacks.length===0&&(v.delete(s),v.size===0&&cancelAnimationFrame(j))}}function Le(s){const{scope:t,getRect:e}=s,i=Qe(t);return function r(){const a=[];v.forEach((o,l)=>{const c=e(l);i(o.rect,c)||(o.rect=c,a.push(o))}),a.forEach(o=>{o.callbacks.forEach(l=>l(o.rect))}),j=requestAnimationFrame(r)}}var vt=(s,t)=>s.width===t.width&&s.height===t.height,Pt=(s,t)=>s.top===t.top&&s.left===t.left,Be=(s,t)=>vt(s,t)&&Pt(s,t);function Qe(s){return s==="size"?vt:s==="position"?Pt:Be}var Ue=Ft("tabs").parts("root","list","trigger","content","indicator"),C=Ue.build(),f=Vt({getRootId:s=>s.ids?.root??`tabs:${s.id}`,getTablistId:s=>s.ids?.tablist??`tabs:${s.id}:list`,getContentId:(s,t)=>s.ids?.content??`tabs:${s.id}:content-${t}`,getTriggerId:(s,t)=>s.ids?.trigger??`tabs:${s.id}:trigger-${t}`,getIndicatorId:s=>s.ids?.indicator??`tabs:${s.id}:indicator`,getTablistEl:s=>f.getById(s,f.getTablistId(s)),getContentEl:(s,t)=>f.getById(s,f.getContentId(s,t)),getTriggerEl:(s,t)=>f.getById(s,f.getTriggerId(s,t)),getIndicatorEl:s=>f.getById(s,f.getIndicatorId(s)),getElements:s=>{const e=`[role=tab][data-ownedby='${CSS.escape(f.getTablistId(s))}']:not([disabled])`;return Dt(f.getTablistEl(s),e)},getFirstEl:s=>zt(f.getElements(s)),getLastEl:s=>Lt(f.getElements(s)),getNextEl:(s,t)=>Bt(f.getElements(s),f.getTriggerId(s,t),s.loop),getPrevEl:(s,t)=>Qt(f.getElements(s),f.getTriggerId(s,t),s.loop),getActiveContentEl:s=>{if(s.value)return f.getContentEl(s,s.value)},getActiveTabEl:s=>{if(s.value)return f.getTriggerEl(s,s.value)},getOffsetRect:s=>({left:s?.offsetLeft??0,top:s?.offsetTop??0,width:s?.offsetWidth??0,height:s?.offsetHeight??0}),getRectById:(s,t)=>{const e=Ut(f.getElements(s),f.getTriggerId(s,t));return f.resolveRect(f.getOffsetRect(e))},resolveRect:s=>({width:`${s.width}px`,height:`${s.height}px`,left:`${s.left}px`,top:`${s.top}px`})});function We(s,t,e){const i=s.context.translations,r=s.matches("focused");function a(o){return{isSelected:s.context.value===o.value,isFocused:s.context.focusedValue===o.value,isDisabled:!!o.disabled}}return{value:s.context.value,focusedValue:s.context.focusedValue,setValue(o){t({type:"SET_VALUE",value:o})},clearValue(){t({type:"CLEAR_VALUE"})},setIndicatorRect(o){const l=f.getTriggerId(s.context,o);t({type:"SET_INDICATOR_RECT",id:l})},getTriggerState:a,rootProps:e.element({...C.root.attrs,id:f.getRootId(s.context),"data-orientation":s.context.orientation,"data-focus":O(r),dir:s.context.dir}),tablistProps:e.element({...C.list.attrs,id:f.getTablistId(s.context),role:"tablist",dir:s.context.dir,"data-focus":O(r),"aria-orientation":s.context.orientation,"data-orientation":s.context.orientation,"aria-label":i.tablistLabel,onKeyDown(o){if(!Wt(o))return;const l={ArrowDown(){t("ARROW_DOWN")},ArrowUp(){t("ARROW_UP")},ArrowLeft(){t("ARROW_LEFT")},ArrowRight(){t("ARROW_RIGHT")},Home(){t("HOME")},End(){t("END")},Enter(){t({type:"ENTER",value:s.context.focusedValue})}};let c=Mt(o,s.context);const n=l[c];n&&(o.preventDefault(),n(o))}}),getTriggerProps(o){const{value:l,disabled:c}=o,n=a(o);return e.button({...C.trigger.attrs,role:"tab",type:"button",disabled:c,dir:s.context.dir,"data-orientation":s.context.orientation,"data-disabled":O(c),"aria-disabled":c,"data-value":l,"aria-selected":n.isSelected,"data-selected":O(n.isSelected),"data-focus":O(n.isFocused),"aria-controls":f.getContentId(s.context,l),"data-ownedby":f.getTablistId(s.context),id:f.getTriggerId(s.context,l),tabIndex:n.isSelected?0:-1,onFocus(){t({type:"TAB_FOCUS",value:l})},onBlur(h){h.relatedTarget?.getAttribute("role")!=="tab"&&t({type:"TAB_BLUR"})},onClick(h){c||($t()&&h.currentTarget.focus(),t({type:"TAB_CLICK",value:l}))}})},getContentProps(o){const{value:l}=o,c=s.context.value===l;return e.element({...C.content.attrs,dir:s.context.dir,id:f.getContentId(s.context,l),tabIndex:0,"aria-labelledby":f.getTriggerId(s.context,l),role:"tabpanel","data-ownedby":f.getTablistId(s.context),"data-selected":O(c),"data-orientation":s.context.orientation,hidden:!c})},indicatorProps:e.element({id:f.getIndicatorId(s.context),...C.indicator.attrs,dir:s.context.dir,"data-orientation":s.context.orientation,style:{"--transition-property":"left, right, top, bottom, width, height","--left":s.context.indicatorRect?.left,"--top":s.context.indicatorRect?.top,"--width":s.context.indicatorRect?.width,"--height":s.context.indicatorRect?.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:s.context.canIndicatorTransition?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[s.context.orientation==="horizontal"?"left":"top"]:s.context.orientation==="horizontal"?"var(--left)":"var(--top)"}})}}var{not:Me}=pt;function $e(s){const t=jt(s);return ft({initial:"idle",context:{dir:"ltr",orientation:"horizontal",activationMode:"automatic",value:null,focusedValue:null,indicatorRect:{left:"0px",top:"0px",width:"0px",height:"0px"},canIndicatorTransition:!1,isIndicatorRendered:!1,loop:!0,translations:{},...t},computed:{isHorizontal:e=>e.orientation==="horizontal",isVertical:e=>e.orientation==="vertical"},entry:["checkRenderedElements","syncIndicatorRect","setContentTabIndex"],exit:["cleanupObserver"],watch:{value:["enableIndicatorTransition","syncIndicatorRect","setContentTabIndex"],dir:["syncIndicatorRect"],orientation:["syncIndicatorRect"]},on:{SET_VALUE:{actions:"setValue"},CLEAR_VALUE:{actions:"clearValue"},SET_INDICATOR_RECT:{actions:"setIndicatorRect"}},states:{idle:{on:{TAB_FOCUS:[{guard:"selectOnFocus",target:"focused",actions:["setFocusedValue","setValue"]},{target:"focused",actions:"setFocusedValue"}],TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_LEFT:{guard:"isHorizontal",actions:"focusPrevTab"},ARROW_RIGHT:{guard:"isHorizontal",actions:"focusNextTab"},ARROW_UP:{guard:"isVertical",actions:"focusPrevTab"},ARROW_DOWN:{guard:"isVertical",actions:"focusNextTab"},HOME:{actions:"focusFirstTab"},END:{actions:"focusLastTab"},ENTER:{guard:Me("selectOnFocus"),actions:"setValue"},TAB_FOCUS:[{guard:"selectOnFocus",actions:["setFocusedValue","setValue"]},{actions:"setFocusedValue"}],TAB_BLUR:{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{isVertical:e=>e.isVertical,isHorizontal:e=>e.isHorizontal,selectOnFocus:e=>e.activationMode==="automatic"},actions:{setFocusedValue(e,i){I.focusedValue(e,i.value)},clearFocusedValue(e){I.focusedValue(e,null)},setValue(e,i){I.value(e,i.value)},clearValue(e){I.value(e,null)},focusFirstTab(e){T(()=>f.getFirstEl(e)?.focus())},focusLastTab(e){T(()=>f.getLastEl(e)?.focus())},focusNextTab(e){if(!e.focusedValue)return;const i=f.getNextEl(e,e.focusedValue);T(()=>i?.focus())},focusPrevTab(e){if(!e.focusedValue)return;const i=f.getPrevEl(e,e.focusedValue);T(()=>i?.focus())},checkRenderedElements(e){e.isIndicatorRendered=!!f.getIndicatorEl(e)},setContentTabIndex(e){T(()=>{const i=f.getActiveContentEl(e);if(!i)return;yt(i).length>0?i.removeAttribute("tabindex"):i.setAttribute("tabindex","0")})},cleanupObserver(e){e.indicatorCleanup?.()},enableIndicatorTransition(e){e.canIndicatorTransition=!0},setIndicatorRect(e,i){const r=i.id??e.value;!e.isIndicatorRendered||!r||!f.getTriggerEl(e,r)||(e.indicatorRect=f.getRectById(e,r),X(()=>{e.canIndicatorTransition=!1}))},syncIndicatorRect(e){e.indicatorCleanup?.();const i=e.value;if(!e.isIndicatorRendered||!i)return;const r=f.getActiveTabEl(e);r&&(e.indicatorCleanup=ze(r,{getRect(a){return f.getOffsetRect(a)},onChange(a){e.indicatorRect=f.resolveRect(a),X(()=>{e.canIndicatorTransition=!1})}}))}}})}var it={change:s=>{s.value!=null&&s.onValueChange?.({value:s.value})},focusChange:s=>{s.focusedValue!=null&&s.onFocusChange?.({focusedValue:s.focusedValue})}},I={value:(s,t)=>{Y(t,s.value)||(s.value=t,it.change(s))},focusedValue:(s,t)=>{Y(t,s.focusedValue)||(s.focusedValue=t,it.focusChange(s))}};B()(["activationMode","dir","getRootNode","id","ids","loop","onFocusChange","onValueChange","orientation","translations","value"]);B()(["disabled","value"]);B()(["value"]);const[je,U]=q({hookName:"useTabsContext",providerName:"<TabsProvider />"}),qe=s=>{const[t,e]=Q()(s,["value"]),i=U(),r=Ne(),a=Ie(P(r,()=>({present:i().value===t.value}))),o=P(()=>i().getContentProps(t),()=>a().presenceProps,e);return m(Ee,{value:a,get children(){return m(qt,{get when(){return!a().isUnmounted},get children(){return m(_.div,o)}})}})},Ge=s=>{const t=U(),e=P(()=>t().indicatorProps,s);return m(_.div,e)},He=s=>{const t=U(),e=P(()=>t().tablistProps,s);return m(_.div,e)},Ze=s=>{const[t,e]=Q()(s,["disabled","value"]),i=U(),r=P(()=>i().getTriggerProps(t),e);return m(_.button,r)},Xe=s=>{const t=Gt(),e=P({id:Ht(),getRootNode:t},s),[i,r]=gt($e(e),{context:e});return $(()=>We(i,r,Zt))},Ye=s=>{const[t,e]=kt(s),[i,r]=Q()(e,["activationMode","dir","getRootNode","id","ids","loop","onFocusChange","onValueChange","orientation","translations","value"]),a=Xe(i),o=P(()=>a().rootProps,r);return m(je,{value:a,get children(){return m(Re,{value:t,get children(){return m(_.div,o)}})}})},Je="/dart-ast-explorer/assets/analyzer-DXouWDTH.wasm";let Ot;const Ke=async(s,t)=>{let e;function i(n){const h=e.exports.$stringLength(n);let u="",d=0;for(;d<h;){let p=Math.min(h-d,65535);const g=new Array(p);for(let x=0;x<p;x++)g[x]=e.exports.$stringRead(n,d++);u+=String.fromCharCode(...g)}return u}function r(n){const h=n.length;let u=0;for(let d=0;d<h;d++)u|=n.codePointAt(d);if(u<256){const d=e.exports.$stringAllocate1(h);for(let p=0;p<h;p++)e.exports.$stringWrite1(d,p,n.codePointAt(p));return d}else{const d=e.exports.$stringAllocate2(h);for(let p=0;p<h;p++)e.exports.$stringWrite2(d,p,n.charCodeAt(p));return d}}function a(n,h){const u=e.exports.$listLength(h),d=new n(u);for(let p=0;p<u;p++)d[p]=e.exports.$listRead(h,p);return d}Ot=function(n){const h=e.exports.$makeStringList();for(let u=0;u<n.length;u++)e.exports.$listAdd(h,r(n[u]));return h};const o=Symbol("JSWrappedDartFunction");WebAssembly.String===void 0&&(console.log("WebAssembly.String is undefined, adding polyfill"),WebAssembly.String={charCodeAt:(n,h)=>n.charCodeAt(h),compare:(n,h)=>n<h?-1:n>h?1:0,concat:(n,h)=>n+h,equals:(n,h)=>n===h,fromCharCode:n=>String.fromCharCode(n),length:n=>n.length,substring:(n,h,u)=>n.substring(h,u)});const c={dart2wasm:{_45:(n,h,u,d,p)=>new AstTreeNode(n,h,u,d,p),_46:(n,h)=>n.enterNode(h),_47:n=>n.exitNode(),_65:()=>globalThis.tree,_90:n=>r(JSON.stringify(i(n))),_91:n=>console.log(i(n)),_194:n=>n===void 0,_195:n=>typeof n=="boolean",_196:n=>typeof n=="number",_198:n=>typeof n=="string",_201:n=>n instanceof Int8Array,_202:n=>n instanceof Uint8Array,_203:n=>n instanceof Uint8ClampedArray,_204:n=>n instanceof Int16Array,_205:n=>n instanceof Uint16Array,_206:n=>n instanceof Int32Array,_207:n=>n instanceof Uint32Array,_208:n=>n instanceof Float32Array,_209:n=>n instanceof Float64Array,_210:n=>n instanceof ArrayBuffer,_211:n=>n instanceof DataView,_212:n=>n instanceof Array,_213:n=>typeof n=="function"&&n[o]===!0,_216:n=>n instanceof RegExp,_217:(n,h)=>n===h,_218:n=>n,_219:n=>n,_220:n=>n,_221:n=>!!n,_222:n=>n.length,_225:(n,h)=>n[h],_226:n=>n.dartFunction,_227:n=>a(Int8Array,n),_228:n=>a(Uint8Array,n),_229:n=>a(Uint8ClampedArray,n),_230:n=>a(Int16Array,n),_231:n=>a(Uint16Array,n),_232:n=>a(Int32Array,n),_233:n=>a(Uint32Array,n),_234:n=>a(Float32Array,n),_235:n=>a(Float64Array,n),_236:(n,h)=>{const u=new DataView(new ArrayBuffer(h));for(let d=0;d<h;d++)u.setUint8(d,e.exports.$byteDataGetUint8(n,d));return u},_237:n=>a(Array,n),_238:i,_239:r,_246:(n,h)=>n[h],_183:(n,h)=>{try{return new RegExp(n,h)}catch(u){return String(u)}},_184:(n,h)=>n.exec(h),_185:(n,h)=>n.test(h),_186:(n,h)=>n.exec(h),_187:(n,h)=>n.exec(h),_188:n=>n.pop(),_242:n=>new Array(n),_250:n=>String(n),_255:n=>n.index,_257:n=>n.length,_259:(n,h)=>n[h],_263:n=>n.flags,_264:n=>n.multiline,_265:n=>n.ignoreCase,_266:n=>n.unicode,_267:n=>n.dotAll,_268:(n,h)=>n.lastIndex=h,_143:Object.is,_145:WebAssembly.String.concat,_153:n=>new DataView(n.buffer,n.byteOffset,n.byteLength),_103:(n,h)=>n.push(h),_114:n=>n.length,_116:(n,h)=>n[h],_117:(n,h,u)=>n[h]=u,_119:n=>n.join(""),_122:(n,h)=>n.split(h),_123:n=>n.toLowerCase(),_124:n=>n.toUpperCase(),_125:n=>n.trim(),_129:(n,h,u)=>n.indexOf(h,u),_130:(n,h,u)=>n.lastIndexOf(h,u),_132:(n,h,u)=>new Uint8Array(n.buffer,n.byteOffset+h,u),_133:(n,h,u)=>new Int8Array(n.buffer,n.byteOffset+h,u),_134:(n,h,u)=>new Uint8ClampedArray(n.buffer,n.byteOffset+h,u),_135:(n,h,u)=>new Uint16Array(n.buffer,n.byteOffset+h,u),_136:(n,h,u)=>new Int16Array(n.buffer,n.byteOffset+h,u),_137:(n,h,u)=>new Uint32Array(n.buffer,n.byteOffset+h,u),_138:(n,h,u)=>new Int32Array(n.buffer,n.byteOffset+h,u),_141:(n,h,u)=>new Float32Array(n.buffer,n.byteOffset+h,u),_142:(n,h,u)=>new Float64Array(n.buffer,n.byteOffset+h,u),_144:WebAssembly.String.charCodeAt,_146:WebAssembly.String.substring,_147:WebAssembly.String.length,_148:WebAssembly.String.equals,_149:WebAssembly.String.compare,_150:WebAssembly.String.fromCharCode,_157:Function.prototype.call.bind(Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get),_158:(n,h)=>new DataView(n,h),_160:Function.prototype.call.bind(DataView.prototype.getUint8),_161:Function.prototype.call.bind(DataView.prototype.setUint8),_162:Function.prototype.call.bind(DataView.prototype.getInt8),_164:Function.prototype.call.bind(DataView.prototype.getUint16),_166:Function.prototype.call.bind(DataView.prototype.getInt16),_168:Function.prototype.call.bind(DataView.prototype.getUint32),_170:Function.prototype.call.bind(DataView.prototype.getInt32),_176:Function.prototype.call.bind(DataView.prototype.getFloat32),_178:Function.prototype.call.bind(DataView.prototype.getFloat64),_101:n=>queueMicrotask(()=>e.exports.$invokeCallback(n)),_180:n=>r(i(n).toUpperCase()),_181:n=>r(i(n).toLowerCase()),_66:n=>r(n.toString()),_80:n=>{const h=i(n);return/^\s*[+-]?(?:Infinity|NaN|(?:\.\d+|\d+(?:\.\d*)?)(?:[eE][+-]?\d+)?)\s*$/.test(h)?parseFloat(h):NaN},_81:()=>{let h=new Error().stack.toString().split(`
`),u=2;return h[0]==="Error"&&(u+=1),h.slice(u).join(`
`)},_85:()=>globalThis.location!=null?r(globalThis.location.href):null,_86:()=>typeof process!=null&&Object.prototype.toString.call(process)=="[object process]"&&process.platform=="win32"},Math,Date,Object,Array,Reflect};return e=await WebAssembly.instantiate(await s,{...c,...await t}),e},ts=(s,...t)=>{const e=s.exports.$getMain(),i=Ot(t);s.exports.$invokeMain(e,i)};let At=class{id;type;source;range;children;constructor(t,e,i,r,a){this.id=t,this.type=e,this.source=i,this.range=[r,a],this.children=[]}findChild(t){return this.children.find(e=>e.id===t)}};class Tt{rootNode;_currentAddress;constructor(){this.rootNode=new At(0,"ROOT","",0,0),this._currentAddress=[]}enterNode(t){this._getNodeAtCurrentAddress().children.push(t),this._currentAddress.push(t.id)}exitNode(){this._currentAddress.pop()}_getNodeAtCurrentAddress(){let t=this.rootNode;for(const e of this._currentAddress)t=t.findChild(e);return t}}var nt={};class D{constructor(t,e,i,r,a,o,l,c,n,h=0,u){this.p=t,this.stack=e,this.state=i,this.reducePos=r,this.pos=a,this.score=o,this.buffer=l,this.bufferBase=c,this.curContext=n,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let r=t.parser.context;return new D(t,[],e,i,i,0,[],0,r?new rt(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,r=t&65535,{parser:a}=this.p,o=a.dynamicPrecedence(r);if(o&&(this.score+=o),i==0){this.pushState(a.getGoto(this.state,r,!0),this.reducePos),r<a.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(i-1)*3-(t&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,n=this.reducePos-c;n>=2e3&&!(!((e=this.p.parser.nodeSet.types[r])===null||e===void 0)&&e.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=n):this.p.lastBigReductionSize<n&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=n));let h=l?this.stack[l-1]:0,u=this.bufferBase+this.buffer.length-h;if(r<a.minRepeatTerm||t&131072){let d=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,c,d,u+4,!0)}if(t&262144)this.state=this.stack[l];else{let d=this.stack[l-3];this.state=a.getGoto(d,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,c)}storeNode(t,e,i,r=4,a=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(e==i)return;if(o.buffer[l-2]>=e){o.buffer[l-2]=i;return}}}if(!a||this.pos==i)this.buffer.push(t,e,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4);this.buffer[o]=t,this.buffer[o+1]=e,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(t,e,i,r){if(t&131072)this.pushState(t&65535,this.pos);else if(t&262144)this.pos=r,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,r,4);else{let a=t,{parser:o}=this.p;(r>this.pos||e<=o.maxNode)&&(this.pos=r,o.stateFlag(a,1)||(this.reducePos=r)),this.pushState(a,i),this.shiftContext(e,i),e<=o.maxNode&&this.buffer.push(e,i,r,4)}}apply(t,e,i,r){t&65536?this.reduce(t):this.shift(t,e,i,r)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),r=t.bufferBase+e;for(;t&&r==t.bufferBase;)t=t.parent;return new D(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new es(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if(!(i&65536))return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let r=[];for(let a=0,o;a<e.length;a+=2)(o=e[a+1])!=this.state&&this.p.parser.hasAction(o,t)&&r.push(e[a],o);if(this.stack.length<120)for(let a=0;r.length<8&&a<e.length;a+=2){let o=e[a+1];r.some((l,c)=>c&1&&l==o)||r.push(e[a],o)}e=r}let i=[];for(let r=0;r<e.length&&i.length<4;r+=2){let a=e[r+1];if(a==this.state)continue;let o=this.split();o.pushState(a,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(e[r],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(!(e&65536))return!1;if(!t.validAction(this.state,e)){let i=e>>19,r=e&65535,a=this.stack.length-i*3;if(a<0||t.getGoto(this.stack[a],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;e=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(r,a)=>{if(!e.includes(r))return e.push(r),t.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-a;if(l>1){let c=o&65535,n=this.stack.length-l*3;if(n>=0&&t.getGoto(this.stack[n],c,!1)>=0)return l<<19|65536|c}}else{let l=i(o,a+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new rt(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class rt{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}class es{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=t&65535,i=t>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=r}}class z{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new z(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new z(this.stack,this.pos,this.index)}}function E(s,t=Uint16Array){if(typeof s!="string")return s;let e=null;for(let i=0,r=0;i<s.length;){let a=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){a=65535;break}o>=92&&o--,o>=34&&o--;let c=o-32;if(c>=46&&(c-=46,l=!0),a+=c,l)break;a*=46}e?e[r++]=a:e=new t(a)}return e}class V{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ot=new V;class ss{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ot,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let i=this.range,r=this.rangeIndex,a=this.pos+t;for(;a<i.from;){if(!r)return null;let o=this.ranges[--r];a-=i.from-o.to,i=o}for(;e<0?a>i.to:a>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];a+=o.from-i.to,i=o}return a}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e=this.chunkOff+t,i,r;if(e>=0&&e<this.chunk.length)i=this.pos+t,r=this.chunk.charCodeAt(e);else{let a=this.resolveOffset(t,1);if(a==null)return-1;if(i=a,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(t,e=0){let i=e?this.resolveOffset(e,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=i}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=ot,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let i="";for(let r of this.ranges){if(r.from>=e)break;r.to>t&&(i+=this.input.read(Math.max(r.from,t),Math.min(r.to,e)))}return i}}class A{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:i}=e.p;is(this.data,t,e,this.id,i.data,i.tokenPrecTable)}}A.prototype.contextual=A.prototype.fallback=A.prototype.extend=!1;A.prototype.fallback=A.prototype.extend=!1;function is(s,t,e,i,r,a){let o=0,l=1<<i,{dialect:c}=e.p.parser;t:for(;l&s[o];){let n=s[o+1];for(let p=o+3;p<n;p+=2)if((s[p+1]&l)>0){let g=s[p];if(c.allows(g)&&(t.token.value==-1||t.token.value==g||ns(g,t.token.value,r,a))){t.acceptToken(g);break}}let h=t.next,u=0,d=s[o+2];if(t.next<0&&d>u&&s[n+d*3-3]==65535){o=s[n+d*3-1];continue t}for(;u<d;){let p=u+d>>1,g=n+p+(p<<1),x=s[g],St=s[g+1]||65536;if(h<x)d=p;else if(h>=St)u=p+1;else{o=s[g+2],t.advance();continue t}}break}}function at(s,t,e){for(let i=t,r;(r=s[i])!=65535;i++)if(r==e)return i-t;return-1}function ns(s,t,e,i){let r=at(e,i,t);return r<0||at(e,i,s)<r}const b=typeof process<"u"&&nt&&/\bparse\b/.test(nt.LOG);let M=null;function lt(s,t,e){let i=s.cursor(te.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(s.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:s.length}}class rs{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?lt(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?lt(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let i=this.trees[e],r=this.index[e];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=i.children[r],o=this.start[e]+i.positions[r];if(o>t)return this.nextStart=o,null;if(a instanceof F){if(o==t){if(o<this.safeFrom)return null;let l=o+a.length;if(l<=this.safeTo){let c=a.prop(G.lookAhead);if(!c||l+c<this.fragment.to)return a}}this.index[e]++,o+a.length>=Math.max(this.safeFrom,t)&&(this.trees.push(a),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+a.length}}}class os{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(i=>new V)}getActions(t){let e=0,i=null,{parser:r}=t.p,{tokenizers:a}=r,o=r.stateSlot(t.state,3),l=t.curContext?t.curContext.hash:0,c=0;for(let n=0;n<a.length;n++){if(!(1<<n&o))continue;let h=a[n],u=this.tokens[n];if(!(i&&!h.fallback)&&((h.contextual||u.start!=t.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,h,t),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(c=Math.max(u.lookAhead,c)),u.value!=0)){let d=e;if(u.extended>-1&&(e=this.addActions(t,u.extended,u.end,e)),e=this.addActions(t,u.value,u.end,e),!h.extend&&(i=u,e>d))break}}for(;this.actions.length>e;)this.actions.pop();return c&&t.setLookAhead(c),!i&&t.pos==this.stream.end&&(i=new V,i.value=t.p.parser.eofTerm,i.start=i.end=t.pos,e=this.addActions(t,i.value,i.end,e)),this.mainToken=i,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new V,{pos:i,p:r}=t;return e.start=i,e.end=Math.min(i+1,r.stream.end),e.value=i==r.stream.end?r.parser.eofTerm:0,e}updateCachedToken(t,e,i){let r=this.stream.clipPos(i.pos);if(e.token(this.stream.reset(r,t),i),t.value>-1){let{parser:a}=i.p;for(let o=0;o<a.specialized.length;o++)if(a.specialized[o]==t.value){let l=a.specializers[o](this.stream.read(t.start,t.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?t.extended=l>>1:t.value=l>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,e,i,r){for(let a=0;a<r;a+=3)if(this.actions[a]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=i,r}addActions(t,e,i,r){let{state:a}=t,{parser:o}=t.p,{data:l}=o;for(let c=0;c<2;c++)for(let n=o.stateSlot(a,c?2:1);;n+=3){if(l[n]==65535)if(l[n+1]==1)n=k(l,n+2);else{r==0&&l[n+1]==2&&(r=this.putAction(k(l,n+2),e,i,r));break}l[n]==e&&(r=this.putAction(k(l,n+1),e,i,r))}return r}}class as{constructor(t,e,i,r){this.parser=t,this.input=e,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new ss(e,r),this.tokens=new os(t,this.stream),this.topTerm=t.top[1];let{from:a}=r[0];this.stacks=[D.start(this,t.top[0],a)],this.fragments=i.length&&this.stream.end-a>t.bufferLength*4?new rs(i,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,e=this.minStackPos,i=this.stacks=[],r,a;if(this.bigReductionCount>300&&t.length==1){let[o]=t;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<t.length;o++){let l=t[o];for(;;){if(this.tokens.mainToken=null,l.pos>e)i.push(l);else{if(this.advanceStack(l,i,t))continue;{r||(r=[],a=[]),r.push(l);let c=this.tokens.getMainToken(l);a.push(c.value,c.end)}}break}}if(!i.length){let o=r&&hs(r);if(o)return b&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw b&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+e);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,a,i);if(o)return b&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,c)=>c.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>e)&&this.recovering--}else if(i.length>1){t:for(let o=0;o<i.length-1;o++){let l=i[o];for(let c=o+1;c<i.length;c++){let n=i[c];if(l.sameState(n)||l.buffer.length>500&&n.buffer.length>500)if((l.score-n.score||l.buffer.length-n.buffer.length)>0)i.splice(c--,1);else{i.splice(o--,1);continue t}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,i){let r=t.pos,{parser:a}=this,o=b?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let n=t.curContext&&t.curContext.tracker.strict,h=n?t.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let d=this.parser.nodeSet.types[u.type.id]==u.type?a.getGoto(t.state,u.type.id):-1;if(d>-1&&u.length&&(!n||(u.prop(G.contextHash)||0)==h))return t.useNode(u,d),b&&console.log(o+this.stackID(t)+` (via reuse of ${a.getName(u.type.id)})`),!0;if(!(u instanceof F)||u.children.length==0||u.positions[0]>0)break;let p=u.children[0];if(p instanceof F&&u.positions[0]==0)u=p;else break}}let l=a.stateSlot(t.state,4);if(l>0)return t.reduce(l),b&&console.log(o+this.stackID(t)+` (via always-reduce ${a.getName(l&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let c=this.tokens.getActions(t);for(let n=0;n<c.length;){let h=c[n++],u=c[n++],d=c[n++],p=n==c.length||!i,g=p?t:t.split(),x=this.tokens.mainToken;if(g.apply(h,u,x?x.start:g.pos,d),b&&console.log(o+this.stackID(g)+` (via ${h&65536?`reduce of ${a.getName(h&65535)}`:"shift"} for ${a.getName(u)} @ ${r}${g==t?"":", split"})`),p)return!0;g.pos>r?e.push(g):i.push(g)}return!1}advanceFully(t,e){let i=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>i)return ht(t,e),!0}}runRecovery(t,e,i){let r=null,a=!1;for(let o=0;o<t.length;o++){let l=t[o],c=e[o<<1],n=e[(o<<1)+1],h=b?this.stackID(l)+" -> ":"";if(l.deadEnd&&(a||(a=!0,l.restart(),b&&console.log(h+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),d=h;for(let p=0;u.forceReduce()&&p<10&&(b&&console.log(d+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));p++)b&&(d=this.stackID(u)+" -> ");for(let p of l.recoverByInsert(c))b&&console.log(h+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,i);this.stream.end>l.pos?(n==l.pos&&(n++,c=0),l.recoverByDelete(c,n),b&&console.log(h+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),ht(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(t){return t.close(),F.build({buffer:z.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(M||(M=new WeakMap)).get(t);return e||M.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function ht(s,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==s.pos&&i.sameState(s)){t[e].score<s.score&&(t[e]=s);return}}t.push(s)}class ls{constructor(t,e,i){this.source=t,this.flags=e,this.disabled=i}allows(t){return!this.disabled||this.disabled[t]==0}}class L extends Xt{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let l=0;l<t.repeatNodeCount;l++)e.push("");let i=Object.keys(t.topRules).map(l=>t.topRules[l][1]),r=[];for(let l=0;l<e.length;l++)r.push([]);function a(l,c,n){r[l].push([c,c.deserialize(String(n))])}if(t.nodeProps)for(let l of t.nodeProps){let c=l[0];typeof c=="string"&&(c=G[c]);for(let n=1;n<l.length;){let h=l[n++];if(h>=0)a(h,c,l[n++]);else{let u=l[n+-h];for(let d=-h;d>0;d--)a(l[n++],c,u);n++}}}this.nodeSet=new Yt(e.map((l,c)=>Jt.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(c)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Kt;let o=E(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(ct),this.states=E(t.states,Uint32Array),this.data=E(t.stateData),this.goto=E(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(l=>typeof l=="number"?new A(o,l):l),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let r=new as(this,t,e,i);for(let a of this.wrappers)r=a(r,t,e,i);return r}getGoto(t,e,i=!1){let r=this.goto;if(e>=r[0])return-1;for(let a=r[e+1];;){let o=r[a++],l=o&1,c=r[a++];if(l&&i)return c;for(let n=a+(o>>1);a<n;a++)if(r[a]==t)return c;if(l)return-1}}hasAction(t,e){let i=this.data;for(let r=0;r<2;r++)for(let a=this.stateSlot(t,r?2:1),o;;a+=3){if((o=i[a])==65535)if(i[a+1]==1)o=i[a=k(i,a+2)];else{if(i[a+1]==2)return k(i,a+2);break}if(o==e||o==0)return k(i,a+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,i=>i==e?!0:null)}allActions(t,e){let i=this.stateSlot(t,4),r=i?e(i):void 0;for(let a=this.stateSlot(t,1);r==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=k(this.data,a+2);else break;r=e(k(this.data,a+1))}return r}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=k(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];e.some((a,o)=>o&1&&a==r)||e.push(this.data[i],r)}}return e}configure(t){let e=Object.assign(Object.create(L.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let r=t.tokenizers.find(a=>a.from==i);return r?r.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,r)=>{let a=t.specializers.find(l=>l.from==i.external);if(!a)return i;let o=Object.assign(Object.assign({},i),{external:a.to});return e.specializers[r]=ct(o),o})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let a of t.split(" ")){let o=e.indexOf(a);o>=0&&(i[o]=!0)}let r=null;for(let a=0;a<e.length;a++)if(!i[a])for(let o=this.dialects[e[a]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new ls(t,i,r)}static deserialize(t){return new L(t)}}function k(s,t){return s[t]|s[t+1]<<16}function hs(s){let t=null;for(let e of s){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function ct(s){if(s.external){let t=s.extend?1:0;return(e,i)=>s.external(e,i)<<1|t}return s.get}const cs=ee({String:y.string,Number:y.number,"True False":y.bool,PropertyName:y.propertyName,Null:y.null,",":y.separator,"[ ]":y.squareBracket,"{ }":y.brace}),us=L.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[cs],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),ds=ie.define({name:"json",parser:us.configure({props:[ne.add({Object:J({except:/^\s*\}/}),Array:J({except:/^\s*\]/})}),re.add({"Object Array":oe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function fs(){return new se(ds)}const{withProvider:ps,withContext:W}=ae(Te),gs=ps(w(Ye),"root"),ut=W(w(qe),"content"),ms=W(w(Ge),"indicator"),bs=W(w(He),"list"),dt=W(w(Ze),"trigger");globalThis.AstTreeNode=At;globalThis.AstTreeBuilder=Tt;const ks=await(await fetch(Je)).arrayBuffer(),xs=await WebAssembly.compile(ks),ys=await Ke(xs,{}),vs=xe(fe,s=>(globalThis.tree=new Tt,ts(ys,s),globalThis.tree.rootNode)),Ts=()=>{const s=le(vs);let t,e;return he(()=>(e=new K({doc:JSON.stringify(s().children,null,2),extensions:[ce,fs(),ue,K.theme({"&":{height:"100%"}}),de.readOnly.of(!0)],parent:t}),()=>{e.destroy()})),mt(()=>{e&&e.update([e.state.update({changes:{from:0,to:e.state.doc.length,insert:JSON.stringify(s().children,null,2)}})])}),m(tt,{flexGrow:1,height:"full",overflow:"auto",get children(){return m(gs,{size:"sm",value:"tree",variant:"line",get children(){return[m(bs,{get children(){return[m(dt,{value:"tree",alignItems:"end",children:"Tree"}),m(dt,{value:"json",alignItems:"end",children:"JSON"}),m(ms,{})]}}),m(ut,{value:"tree",pt:"0",children:"TODO"}),m(ut,{value:"json",pt:"0",get children(){return m(tt,{height:"full",flexGrow:1,overflow:"auto",ref(i){var r=t;typeof r=="function"?r(i):t=i}})}})]}})}})};export{Ts as default};
